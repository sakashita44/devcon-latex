# Dev Container テンプレートリポジトリ

Dockerfileを使用しない、拡張可能で高速なDev Container環境のテンプレートです。

## 前提条件

この開発環境を利用するには、お使いのPC（ホストマシン）に以下のツールがインストールされている必要があります。

* **Visual Studio Code**
* **VS Code 拡張機能:** Dev Containers
* **Docker Desktop** または互換性のあるコンテナエンジン

### 【重要】Git over SSH の利用について

コンテナ内からSSH経由でGitリポジトリ（例: `git@github.com:...`）を操作する場合、以下の設定がホストマシン側で完了している必要があります。

* ホストマシンの`ssh-agent`が起動していること
* `ssh-add`コマンド等で、Git用のSSHキーが`ssh-agent`に登録済みであること

この設定により、VSCodeのDev Containers拡張機能がホストのSSH認証機能をコンテナへ安全に転送（フォワーディング）し、コンテナ内での`git pull/push`などが可能になります。

## 利用方法

### ステップ1. (任意) 外部ディレクトリのマウント設定

ホストマシンのディレクトリ（データセットなど）をコンテナ内にマウントしたい場合は、以下の手順を実行します。

1. `.devcontainer/`ディレクトリにある`.env.example`ファイルをコピーし、同階層に`.env`という名前でファイルを作成します。
1. 作成した`.env`ファイルを開き、`ANY_PATH`の値を、マウントしたいホストOS上のディレクトリの絶対パスに書き換えます。
1. `.env`ファイルは`.gitignore`で追跡対象外となっているため、個人のローカルパスがGitリポジトリにコミットされることはありません。

### ステップ2. コンテナの起動

1. VS Codeでこのフォルダを開きます。
1. コマンドパレット (Windows/Linux: `Ctrl+Shift+P`, macOS: `Cmd+Shift+P`) を開き、`Dev Containers: Reopen in Container` を実行します。
1. 目的の環境を選択すると、コンテナの起動が開始されます。

## このテンプレートの設計思想

このテンプレートは、メンテナンス性と再利用性を高めるため、いくつかの思想に基づいて設計されています。

### Dockerfileレス構成

Microsoftが提供するビルド済みの公式イメージを`docker-compose.yml`で直接指定することで、`Dockerfile`のビルド処理を省略し、環境構築を高速化しています。追加のCLIツールは`devcontainer.json`の`features`プロパティで宣言的に管理します。

### `.env`による動的マウント設定

`docker-compose.yml`内で`${ANY_PATH}`構文を使用し、`.env`ファイルから環境変数を読み込んでディレクトリマウントを動的に行います。これにより、ホストOSを汚すことなく、プロジェクト固有の環境設定を安全にコンテナへ渡すことができます。

### 豊富な開発ツール

各環境には、コード品質向上とチーム開発を支援する拡張機能が事前設定されています：

* **バージョン管理**: GitLens、GitHub統合
* **コード品質**: スペルチェッカー、TODO管理
* **ドキュメンテーション**: Markdown拡張、Mermaid図表対応
* **言語固有**: Python環境では、pylance、python拡張などを追加 (必要に応じて)。
