{
  "name": "${localWorkspaceFolderBasename}",
  "dockerComposeFile": "./docker-compose.yml",
  "service": "devcontainer",
  "workspaceFolder": "/workspaces/",
  "remoteUser": "vscode",
  "runServices": [
    "devcontainer"
  ],
  "features": {
    "ghcr.io/devcontainers/features/common-utils:2": {
      "installZsh": false,
      "configureZshAsDefaultShell": false,
      "upgradePackages": true
    },
    "ghcr.io/devcontainers/features/git:1": {}
  },
  "postCreateCommand": "sudo apt-get update && sudo apt-get install -y pandoc fonts-noto-cjk fonts-noto-cjk-extra fonts-morisawa-bizud-mincho fonts-morisawa-bizud-gothic texlive-extra-utils texlive-latex-extra texlive-luatex texlive-lang-cjk texlive-fonts-extra locales texlive-science && sudo sed -i '/ja_JP.UTF-8/s/^# //g' /etc/locale.gen && sudo locale-gen && sudo update-locale LANG=ja_JP.UTF-8",
  "customizations": {
    "vscode": {
      "settings": {
        // 基本的なファイル設定
        "files.autoGuessEncoding": true,
        "files.insertFinalNewline": true,
        "files.trimFinalNewlines": true,
        "files.trimTrailingWhitespace": true,
        // 開発の快適性に寄与するエディタ設定
        "editor.formatOnSave": true,
        "editor.bracketPairColorization.enabled": true,
        // Git関連の便利な設定
        "git.autofetch": true,
        "git.confirmSync": false,
        // --- 言語・ツールごとのフォーマッター/Linter設定  ---
        "[json]": {
          "editor.defaultFormatter": "vscode.json-language-features"
        },
        "[yaml]": {
          "editor.defaultFormatter": "redhat.vscode-yaml",
          "editor.insertSpaces": true,
          "editor.tabSize": 2,
          "editor.autoIndent": "advanced"
        },
        "yaml.format.enable": true,
        "[markdown]": {
          "editor.defaultFormatter": "yzhang.markdown-all-in-one"
        },
        "markdownlint.config": {
          "MD007": {
            "indent": 4
          }
        },
        // ツール設定
        "todo-tree.general.tags": [
          "BUG",
          "HACK",
          "FIXME",
          "TODO",
          "XXX",
          "[ ]",
          "[x]"
        ],
        // 追加の設定ここから
        // LaTeX Workshop設定
        "latex-workshop.latex.autoBuild.run": "onSave",
        "latex-workshop.view.pdf.viewer": "tab",
        "latex-workshop.formatting.latex": "latexindent",
        "latex-workshop.formatting.latexindent.args": [
          "%TMPFILE%",
          "-c=%DIR%/",
          "-y=defaultIndent: '    '"
        ],
        "latex-workshop.bibtex-fields.sort.enabled": true,
        "latex-workshop.bibtex-format.sort.enabled": true,
        "latex-workshop.bibtex-format.align-equal.enabled": true,
        "latex-workshop.bibtex-format.tab": "4 spaces",
        "latex-workshop.bibtex-format.trailingComma": true,
        "latex-workshop.linting.chktex.enabled": false,
        "latex-workshop.intellisense.package.enabled": true,
        "latex-workshop.latex.autoClean.run": "onSucceeded",
        "latex-workshop.latex.clean.fileTypes": [
          "*.aux",
          "*.bbl",
          "*.blg",
          "*.idx",
          "*.ind",
          "*.lof",
          "*.lot",
          "*.out",
          "*.toc",
          "*.acn",
          "*.acr",
          "*.alg",
          "*.glg",
          "*.glo",
          "*.gls",
          "*.ist",
          "*.fls",
          "*.log",
          "*.fdb_latexmk",
          "*.synctex.gz"
        ],
        // 日本語フォント設定（BIZ UD明朝使用）
        "latex-workshop.latex.tools": [
          {
            "name": "lualatex",
            "command": "lualatex",
            "args": [
              "-synctex=1",
              "-interaction=nonstopmode",
              "-file-line-error",
              "%DOC%"
            ]
          },
          {
            "name": "bibtex",
            "command": "bibtex",
            "args": [
              "%DOCFILE%"
            ]
          },
          {
            "name": "clean",
            "command": "latexmk",
            "args": [
              "-c"
            ]
          }
        ],
        "latex-workshop.latex.recipes": [
          {
            "name": "LuaLaTeX Temporary: lualatex",
            "tools": [
              "lualatex"
            ]
          },
          {
            "name": "LuaLaTeX Full: lualatex -> bibtex -> lualatex*2",
            "tools": [
              "lualatex",
              "bibtex",
              "lualatex",
              "lualatex"
            ]
          },
          {
            "name": "lualatex (BIZ UD)",
            "tools": [
              "lualatex"
            ]
          }
        ],
        "latex-workshop.latex.recipe.default": "LuaLaTeX Temporary: lualatex",
        // 言語別エディタ設定
        "[tex]": {
          "editor.unicodeHighlight.allowedCharacters": {
            "，": true,
            "．": true
          }
        },
        "[latex]": {
          "editor.unicodeHighlight.allowedCharacters": {
            "，": true,
            "．": true
          }
        },
        "[bibtex]": {
          "editor.tabSize": 4,
          "editor.insertSpaces": true
        },
        // LTeX設定
        "ltex.additionalRules.motherTongue": "ja-JP",
        "ltex.statusBarItem": true,
        "ltex.additionalRules.enablePickyRules": true,
        // 日本語対応
        "ltex.language": "ja-JP",
        // Diff Editor設定
        "diffEditor.ignoreTrimWhitespace": false
        //
        // 追加の設定ここまで
      },
      "extensions": [
        // Version Control & GitHub
        "eamodio.gitlens",
        "GitHub.vscode-pull-request-github",
        "GitHub.copilot",
        "github.vscode-github-actions",
        // Docker & Infrastructure
        "ms-azuretools.vscode-docker",
        "redhat.vscode-yaml",
        // Documentation & Markdown
        "bierner.markdown-mermaid",
        "yzane.markdown-pdf",
        "DavidAnson.vscode-markdownlint",
        "yzhang.markdown-all-in-one",
        // Code Quality & Utilities
        "streetsidesoftware.code-spell-checker",
        "Gruntfuggly.todo-tree",
        "oderwat.indent-rainbow",
        "janisdd.vscode-edit-csv",
        // 追加の拡張機能ここから
        // LaTeX関連
        "James-Yu.latex-workshop",
        "mathematic.vscode-latex",
        "valentjn.vscode-ltex",
        // pandoc関連
        "chrischinchilla.vscode-pandoc"
        //
        // 追加の拡張機能ここまで
      ]
    }
  }
}
